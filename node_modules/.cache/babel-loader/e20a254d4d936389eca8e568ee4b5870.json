{"remainingRequest":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/babel-loader/lib/index.js!/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/am-source-select/sourceSelect/components/CustomSearch.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/am-source-select/sourceSelect/components/CustomSearch.vue","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnY3VzdG9tLXNlYXJjaCcsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaFRleHQ6ICcnLAogICAgICByZXN0YXVyYW50czogW10sCiAgICAgIG1heENhY2hlTnVtOiA1MAogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7fSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgcXVlcnlDaGFuZ2VIYW5kbGVyOiBmdW5jdGlvbiBxdWVyeUNoYW5nZUhhbmRsZXIoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ3NlYXJjaC1jaGFuZ2UnLCB0aGlzLnNlYXJjaFRleHQpOwogICAgICB0aGlzLmJsdXJIYW5kbGVyKCk7CiAgICB9LAogICAgZm9jdXNIYW5kbGVyOiBmdW5jdGlvbiBmb2N1c0hhbmRsZXIoKSB7CiAgICAgIC8v5Y+W5Ye6CiAgICAgIHZhciBzdHIgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0N1c3RvbVNlYXJjaENhY2hlcycpOwoKICAgICAgaWYgKHN0cikgewogICAgICAgIHRoaXMucmVzdGF1cmFudHMgPSBKU09OLnBhcnNlKHN0cik7CiAgICAgIH0KICAgIH0sCiAgICBibHVySGFuZGxlcjogZnVuY3Rpb24gYmx1ckhhbmRsZXIoKSB7CiAgICAgIC8v5YaZ5YWlCiAgICAgIC8vIHsgInZhbHVlIjogIuS4ieWFqOmynOmjn++8iOWMl+aWsOazvuW6l++8iSIsICJhZGRyZXNzIjogIumVv+WugeWMuuaWsOa4lOi3rzE0NOWPtyIgfQogICAgICBpZiAodGhpcy5zZWFyY2hUZXh0Lmxlbmd0aCA9PSAwKSByZXR1cm47CiAgICAgIHZhciBpc0hhcyA9IGZhbHNlOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJlc3RhdXJhbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLnJlc3RhdXJhbnRzW2ldOwoKICAgICAgICBpZiAoaXRlbS52YWx1ZS5pbmRleE9mKHRoaXMuc2VhcmNoVGV4dCkgPiAtMSAmJiBpdGVtLnZhbHVlLmxlbmd0aCA9PSB0aGlzLnNlYXJjaFRleHQubGVuZ3RoKSB7CiAgICAgICAgICBpc0hhcyA9IHRydWU7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChpc0hhcykgcmV0dXJuOwogICAgICB0aGlzLnJlc3RhdXJhbnRzLnVuc2hpZnQoewogICAgICAgIHZhbHVlOiB0aGlzLnNlYXJjaFRleHQsCiAgICAgICAgYWRkcmVzczogJycKICAgICAgfSk7CiAgICAgIHRoaXMucmVzdGF1cmFudHMgPSB0aGlzLnJlc3RhdXJhbnRzLnNsaWNlKDAsIHRoaXMubWF4Q2FjaGVOdW0pOwogICAgICB2YXIgc3RyID0gSlNPTi5zdHJpbmdpZnkodGhpcy5yZXN0YXVyYW50cyk7CiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnQ3VzdG9tU2VhcmNoQ2FjaGVzJywgc3RyKTsKICAgIH0sCiAgICBoYW5kbGVTZWxlY3Q6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdCgpIHsKICAgICAgdGhpcy4kZW1pdCgnc2VhcmNoLWNoYW5nZScsIHRoaXMuc2VhcmNoVGV4dCk7CiAgICB9LAogICAgcXVlcnlTZWFyY2g6IGZ1bmN0aW9uIHF1ZXJ5U2VhcmNoKHF1ZXJ5U3RyaW5nLCBjYikgewogICAgICB2YXIgcmVzdGF1cmFudHMgPSB0aGlzLnJlc3RhdXJhbnRzOwogICAgICB2YXIgcmVzdWx0cyA9IHF1ZXJ5U3RyaW5nID8gcmVzdGF1cmFudHMuZmlsdGVyKHRoaXMuY3JlYXRlRmlsdGVyKHF1ZXJ5U3RyaW5nKSkgOiByZXN0YXVyYW50czsgLy8g6LCD55SoIGNhbGxiYWNrIOi/lOWbnuW7uuiuruWIl+ihqOeahOaVsOaNrgoKICAgICAgY2IocmVzdWx0cyk7CiAgICB9LAogICAgY3JlYXRlRmlsdGVyOiBmdW5jdGlvbiBjcmVhdGVGaWx0ZXIocXVlcnlTdHJpbmcpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyZXN0YXVyYW50KSB7CiAgICAgICAgcmV0dXJuIHJlc3RhdXJhbnQudmFsdWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHF1ZXJ5U3RyaW5nLnRvTG93ZXJDYXNlKCkpID09PSAwOwogICAgICB9OwogICAgfQogIH0KfTs="},{"version":3,"sources":["CustomSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,eAAA;AACA,EAAA,IAAA,EAAA,eADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,EADA;AAEA,MAAA,WAAA,EAAA,EAFA;AAGA,MAAA,WAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,OATA,qBASA,CAEA,CAXA;AAYA,EAAA,OAZA,qBAYA,CAEA,CAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,kBADA,gCACA;AACA,WAAA,KAAA,CAAA,eAAA,EAAA,KAAA,UAAA;AACA,WAAA,WAAA;AACA,KAJA;AAKA,IAAA,YALA,0BAKA;AACA;AACA,UAAA,GAAA,GAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,oBAAA,CAAA;;AACA,UAAA,GAAA,EAAA;AACA,aAAA,WAAA,GAAA,IAAA,CAAA,KAAA,CAAA,GAAA,CAAA;AACA;AACA,KAXA;AAYA,IAAA,WAZA,yBAYA;AACA;AACA;AACA,UAAA,KAAA,UAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,UAAA,KAAA,GAAA,KAAA;;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,WAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,YAAA,IAAA,GAAA,KAAA,WAAA,CAAA,CAAA,CAAA;;AACA,YAAA,IAAA,CAAA,KAAA,CAAA,OAAA,CAAA,KAAA,UAAA,IAAA,CAAA,CAAA,IAAA,IAAA,CAAA,KAAA,CAAA,MAAA,IAAA,KAAA,UAAA,CAAA,MAAA,EAAA;AACA,UAAA,KAAA,GAAA,IAAA;AACA;AACA;AACA;;AACA,UAAA,KAAA,EAAA;AACA,WAAA,WAAA,CAAA,OAAA,CAAA;AAAA,QAAA,KAAA,EAAA,KAAA,UAAA;AAAA,QAAA,OAAA,EAAA;AAAA,OAAA;AACA,WAAA,WAAA,GAAA,KAAA,WAAA,CAAA,KAAA,CAAA,CAAA,EAAA,KAAA,WAAA,CAAA;AACA,UAAA,GAAA,GAAA,IAAA,CAAA,SAAA,CAAA,KAAA,WAAA,CAAA;AACA,MAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,oBAAA,EAAA,GAAA;AACA,KA7BA;AA8BA,IAAA,YA9BA,0BA8BA;AACA,WAAA,KAAA,CAAA,eAAA,EAAA,KAAA,UAAA;AACA,KAhCA;AAiCA,IAAA,WAjCA,uBAiCA,WAjCA,EAiCA,EAjCA,EAiCA;AACA,UAAA,WAAA,GAAA,KAAA,WAAA;AACA,UAAA,OAAA,GAAA,WAAA,GAAA,WAAA,CAAA,MAAA,CAAA,KAAA,YAAA,CAAA,WAAA,CAAA,CAAA,GAAA,WAAA,CAFA,CAGA;;AACA,MAAA,EAAA,CAAA,OAAA,CAAA;AACA,KAtCA;AAuCA,IAAA,YAvCA,wBAuCA,WAvCA,EAuCA;AACA,aAAA,UAAA,UAAA,EAAA;AACA,eAAA,UAAA,CAAA,KAAA,CAAA,WAAA,GAAA,OAAA,CAAA,WAAA,CAAA,WAAA,EAAA,MAAA,CAAA;AACA,OAFA;AAGA;AA3CA;AAfA,CAAA","sourcesContent":["<template>\r\n    <!-- <el-input \r\n        class=\"custom-search\"\r\n        v-model=\"searchText\" \r\n        placeholder=\"请输入关键字\"\r\n        clearable\r\n        size=\"small\" \r\n        @clear=\"queryChangeHandler\"\r\n        @keyup.enter.native=\"queryChangeHandler\">\r\n            <el-button class=\"custom-search-btn\" slot=\"append\" type=\"primary\" size=\"small\" @click=\"queryChangeHandler\">搜索</el-button>\r\n    </el-input> -->\r\n    <el-autocomplete\r\n      class=\"custom-search\"\r\n      v-model=\"searchText\"\r\n      :fetch-suggestions=\"querySearch\"\r\n      placeholder=\"请输入关键字\"\r\n      clearable\r\n      size=\"small\" \r\n      @keyup.enter.native=\"queryChangeHandler\"\r\n      @clear=\"queryChangeHandler\"\r\n      @select=\"handleSelect\"\r\n      @focus=\"focusHandler\"\r\n    >\r\n        <el-button class=\"custom-search-btn\" slot=\"append\" type=\"primary\" size=\"small\" @click=\"queryChangeHandler\">搜索</el-button>\r\n    </el-autocomplete>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:'custom-search',\r\n    data(){\r\n        return {\r\n            searchText:'',\r\n            restaurants:[],\r\n            maxCacheNum:50,\r\n        }\r\n    },\r\n    created(){\r\n        \r\n    },\r\n    mounted(){\r\n        \r\n    },\r\n    methods:{\r\n        queryChangeHandler(){\r\n            this.$emit('search-change',this.searchText);\r\n            this.blurHandler();\r\n        },\r\n        focusHandler(){\r\n            //取出\r\n            let str = window.localStorage.getItem('CustomSearchCaches');\r\n            if(str){\r\n                this.restaurants = JSON.parse(str);\r\n            }\r\n        },\r\n        blurHandler(){\r\n            //写入\r\n            // { \"value\": \"三全鲜食（北新泾店）\", \"address\": \"长宁区新渔路144号\" }\r\n            if(this.searchText.length == 0) return;\r\n            let isHas = false;\r\n            for(let i=0;i<this.restaurants.length;i++){\r\n                let item = this.restaurants[i];\r\n                if(item.value.indexOf(this.searchText)>-1 && item.value.length == this.searchText.length){\r\n                    isHas = true;\r\n                    break;\r\n                }\r\n            }\r\n            if(isHas) return;\r\n            this.restaurants.unshift({value:this.searchText,address:''});\r\n            this.restaurants = this.restaurants.slice(0,this.maxCacheNum);\r\n            let str = JSON.stringify(this.restaurants);\r\n            window.localStorage.setItem('CustomSearchCaches',str);\r\n        },\r\n        handleSelect(){\r\n            this.$emit('search-change',this.searchText);\r\n        },\r\n        querySearch(queryString, cb) {\r\n            const restaurants = this.restaurants;\r\n            let results = queryString ? restaurants.filter(this.createFilter(queryString)) : restaurants;\r\n            // 调用 callback 返回建议列表的数据\r\n            cb(results);\r\n        },\r\n        createFilter(queryString) {\r\n            return (restaurant) => {\r\n                return (restaurant.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\r\n            };\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.custom-search{\r\n    width: 100%;\r\n\r\n    .custom-search-btn {\r\n        color: #ffffff;\r\n        background-color: #409EFF;\r\n        border: none;\r\n        border-top-left-radius: 0;\r\n        border-bottom-left-radius: 0;\r\n\r\n        &:hover{\r\n            background-color: #66b1ff;\r\n        }\r\n    }\r\n}\r\n</style>"],"sourceRoot":"node_modules/am-source-select/sourceSelect/components"}]}