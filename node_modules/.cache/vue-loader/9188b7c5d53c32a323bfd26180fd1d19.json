{"remainingRequest":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zbywjq/Desktop/cloudwork/VideoBatches/src/views/components/titleTail/DialogPreview.vue?vue&type=style&index=0&id=562a4dda&lang=scss&scoped=true&","dependencies":[{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/src/views/components/titleTail/DialogPreview.vue","mtime":1597986811738},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5kaWFsb2ctcHJldmlldy10dHsNCiAgICA6OnYtZGVlcCAuZWwtZGlhbG9nX19oZWFkZXJ7DQogICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlZWVlOw0KICAgIH0NCg0KICAgIDo6di1kZWVwIC5lbC1kaWFsb2dfX2JvZHl7DQogICAgICAgIHBhZGRpbmc6IDIwcHggMjBweDsNCiAgICB9DQoNCiAgICAuZHB0LWNvbnRhaW5lcnsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgIA0KICAgICAgICAuZHB0LXByZXZpZXctYm94ew0KICAgICAgICAgICAgd2lkdGg6IDY0MHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiAzNjBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWVlZWU7DQogICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KDQogICAgICAgICAgICAuZHB0LXByZXZpZXctY29uew0KICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDAwMDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLmRwdC1wcmV2aWV3LWNvbi5hcjkxNnsNCiAgICAgICAgICAgICAgICB3aWR0aDogMjAyLjVweDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9DQogICAgICAgIA0KDQogICAgICAgIC5yZW5kZXItYm94IHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICAgICAgbGVmdDogMDsNCiAgICAgICAgICAgIHRvcDogMDsNCg0KICAgICAgICAgICAgLnJlbmRlci1kZWZhdWx0ew0KICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgICAgICBsZWZ0OiAwOw0KICAgICAgICAgICAgICAgIHRvcDogMDsNCiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgICAgICAgICAgei1pbmRleDogMTsNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoNTIsIDEwNSwgMTA1KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLnJlbmRlci1pbWd7DQogICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICAgICAgICAgIGxlZnQ6IDA7DQogICAgICAgICAgICAgICAgdG9wOiAwOw0KICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgICAgICAgICB6LWluZGV4OiAyOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAmLndhdGVybWFyay1ib3ggaW1new0KICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIA0KICAgIA0KfQ0K"},{"version":3,"sources":["DialogPreview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+PA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA","file":"DialogPreview.vue","sourceRoot":"src/views/components/titleTail","sourcesContent":["<template>\r\n    <el-dialog\r\n        title=\"预览片头片尾\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"680px\"\r\n        :append-to-body=\"true\"\r\n        class=\"dialog-preview-tt\">\r\n        <div class=\"dpt-container\">\r\n            <div class=\"dpt-preview-box\" @mouseover=\"mouseoverHandler\"  @mouseout=\"mouseoutHandler\">\r\n                <div class=\"dpt-preview-con\" :class=\"aspectRatioClass\" @click=\"playAndpauseHandler\">\r\n                    <video ref=\"videoTitle\" class=\"render-box default-video\" v-show=\"conshow1\"></video>\r\n                    <div  ref=\"videoCenter\" class=\"render-box watermark-box\" v-show=\"conshow2\">\r\n                        <div class=\"render-default\">\r\n                        </div>\r\n                        <div class=\"render-img\">\r\n                            <img v-for=\"(item,index) in tt_watermarks\" :key=\"index\" :src=\"item.PreviewUrl\" \r\n                            :style=\"{\r\n                                left:item.Pos.x*100+'%',\r\n                                top:item.Pos.y*100+'%',\r\n                                width:item.Pos.width*100+'%',\r\n                                height:item.Pos.height*100+'%',\r\n                            }\"/>\r\n                        </div>\r\n                    </div>\r\n                    <video ref=\"videoTail\" class=\"render-box default-video\" v-show=\"conshow3\"></video>\r\n                </div>\r\n                <DialogMediaControl ref=\"mediaControl\"\r\n                    :isPause=\"isPause\"\r\n                    v-show=\"isControl\"\r\n                    :controlStatus=\"controlStatus\"\r\n                    @volume-change=\"mc_volumeHandler\"\r\n                    @play=\"mc_playHandler\"\r\n                    @pause=\"mc_pauseHandler\"\r\n                    @seek=\"mc_seekHandler\"/>\r\n            </div>\r\n        </div>\r\n    </el-dialog>\r\n</template>\r\n\r\n<script>\r\n\r\nimport DialogMediaControl from '../DialogMediaControl';\r\nexport default {\r\n    name:'dialog-preview-tt',\r\n    components:{DialogMediaControl},\r\n    props:{\r\n        // hasBack:{\r\n        //     type:Boolean,\r\n        //     default: false\r\n        // },\r\n        // title:{\r\n        //     type:String,\r\n        //     default:''\r\n        // }\r\n    },\r\n    data(){\r\n        return {\r\n            dialogVisible: false,\r\n            aspectRatio: '16:9',\r\n            tt_title:null,\r\n            tt_tail:null,\r\n            tt_watermarks:[],\r\n            dur_title:0,\r\n            dur_tail:0,\r\n            dur_content:2000,\r\n            currentTime:0,\r\n            seqDuration:0,\r\n            controlStatus:'easy',\r\n            isPause:true,\r\n            isControl:true,\r\n            conshow1:false,\r\n            conshow2:false,\r\n            conshow3:false,\r\n            timer:0,\r\n            twocu:0,\r\n            pvalue:0\r\n            \r\n        }\r\n    },\r\n    computed:{\r\n        imgPosStyle(item){\r\n            console.log('itemitemitemitem',item)\r\n            return {\r\n                left:item.Pos.x*100+'%',\r\n                top:item.Pos.y*100+'%',\r\n                width:item.Pos.width*100+'%',\r\n                height:item.Pos.height*100+'%',\r\n            }\r\n        },\r\n        aspectRatioClass(){\r\n            if(this.aspectRatio=='9:16'){\r\n                return 'ar916';\r\n            }\r\n            return '';\r\n        }\r\n    },\r\n    watch:{\r\n        dialogVisible:{\r\n            deep:true,\r\n            handler:function (newVal){\r\n                if(!newVal){\r\n                    this.pause();\r\n                }\r\n            }\r\n        }\r\n    },\r\n    created(){\r\n        \r\n    },\r\n    mounted(){\r\n        // console.log('ssssssssssmountedmountedssss',this.$refs.preRoot)\r\n        // this.$refs.mediaControl.setCurrentTime(0);\r\n        // this.$refs.mediaControl.setDuration(0);\r\n    },\r\n    methods:{\r\n        show(options,callback){\r\n            this.dialogVisible = true;\r\n            // console.log('optionsoptionsoptions',options)\r\n            this.tt_title = null;\r\n            this.tt_tail = null;\r\n            this.tt_watermarks = [];\r\n\r\n            this.dur_title = 0;\r\n            this.dur_tail = 0;\r\n            this.aspectRatio = options.aspectRatio;\r\n            const dataList = options.dataList || [];\r\n            for(let i=0;i<dataList.length;i++){\r\n                let item = dataList[i];\r\n                if(item.ClipType == 'Title_Video'){\r\n                    this.tt_title = item;\r\n                    this.dur_title = this.tt_title.Duration;\r\n                }else if(item.ClipType == 'Tail_Video'){\r\n                    this.tt_tail = item;\r\n                    this.dur_tail = this.tt_tail.Duration;\r\n                }else if(item.ClipType == 'WaterMark_Image'){\r\n                    this.tt_watermarks.push(item);\r\n                }\r\n            }\r\n            this.seqDuration = this.dur_content+this.dur_title+this.dur_tail;\r\n            \r\n            this.$nextTick(()=>{\r\n                this.$refs.mediaControl.setCurrentTime(0);\r\n                this.$refs.mediaControl.setDuration(this.seqDuration/1000);\r\n\r\n                if(this.tt_title){\r\n                    this.$refs.videoTitle.src = this.tt_title.PreviewUrl;\r\n                }\r\n                if(this.tt_tail){\r\n                    this.$refs.videoTail.src = this.tt_tail.PreviewUrl;\r\n                }\r\n                this.seek(0);\r\n            })\r\n        },\r\n        mc_volumeHandler(v){\r\n            this.$refs.videoTitle.volume = v;\r\n            this.$refs.videoTail.volume = v;\r\n            // if(this.video){\r\n            //     this.video.volume = v;\r\n            // }\r\n        },\r\n        mc_playHandler(v){\r\n            // this.video.play();\r\n            this.play();\r\n        },\r\n        mc_pauseHandler(v){\r\n            // this.video.pause();\r\n            this.pause();\r\n        },\r\n        mc_seekHandler(v){\r\n            // console.log('v',v);\r\n            // this.video.currentTime = v;\r\n            this.seek(v*1000);\r\n        },\r\n        mouseoverHandler(){\r\n            this.controlStatus = 'all';\r\n        },\r\n        mouseoutHandler(){\r\n            this.controlStatus = 'easy';\r\n        },\r\n        playAndpauseHandler(){\r\n            if(this.isPause){\r\n                this.play();\r\n            }else{\r\n                this.pause();\r\n            }\r\n        },\r\n        play(){\r\n            if(this.currentTime < this.seqDuration-200){\r\n                clearInterval(this.timer);\r\n                this.timer = setInterval(this.enterframeHandler,40);\r\n                this.isPause = false;\r\n            }\r\n        },\r\n        pause(){\r\n            clearInterval(this.timer);\r\n            this.isPause = true;\r\n            if(!this.$refs.videoTitle.paused){\r\n                this.$refs.videoTitle.pause();\r\n            }\r\n            if(!this.$refs.videoTail.paused){\r\n                this.$refs.videoTail.pause();\r\n            }\r\n        },\r\n        enterframeHandler(){\r\n            this.currentTime += 40;\r\n            let v = this.currentTime;\r\n            if(v>=0 && v<this.dur_title){\r\n                this.conshow1 = true;\r\n                this.conshow2 = false;\r\n                this.conshow3 = false;\r\n                if(this.$refs.videoTitle.paused){\r\n                    this.$refs.videoTitle.play();\r\n                }\r\n            }else if(v>= this.dur_title && v < (this.dur_title+this.dur_content)){\r\n                this.conshow1 = false;\r\n                this.conshow2 = true;\r\n                this.conshow3 = false;\r\n            }else if(v>= (this.dur_title+this.dur_content) && v<= this.seqDuration){\r\n                this.conshow1 = false;\r\n                this.conshow2 = false;\r\n                this.conshow3 = true;\r\n                if(this.$refs.videoTail.paused){\r\n                    this.$refs.videoTail.play();\r\n                }\r\n            }\r\n            this.$refs.mediaControl.setCurrentTime(v/1000);\r\n            if(v>this.seqDuration-40){\r\n                this.pause();\r\n            }\r\n        },\r\n        seek(v){\r\n            v = Math.min(this.seqDuration,Math.max(0,v));\r\n            this.currentTime = v;\r\n            if(v>=0 && v<this.dur_title){\r\n                this.conshow1 = true;\r\n                this.conshow2 = false;\r\n                this.conshow3 = false;\r\n                this.$refs.videoTitle.currentTime = v/1000;\r\n            }else if(v>= this.dur_title && v < (this.dur_title+this.dur_content)){\r\n                this.conshow1 = false;\r\n                this.conshow2 = true;\r\n                this.conshow3 = false;\r\n            }else if(v>= (this.dur_title+this.dur_content) && v<= this.seqDuration){\r\n                this.conshow1 = false;\r\n                this.conshow2 = false;\r\n                this.conshow3 = true;\r\n                this.$refs.videoTail.currentTime = (v-(this.dur_title+this.dur_content))/1000;\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.dialog-preview-tt{\r\n    ::v-deep .el-dialog__header{\r\n        border-bottom: 1px solid #eeeeee;\r\n    }\r\n\r\n    ::v-deep .el-dialog__body{\r\n        padding: 20px 20px;\r\n    }\r\n\r\n    .dpt-container{\r\n        width: 100%;\r\n        \r\n        .dpt-preview-box{\r\n            width: 640px;\r\n            height: 360px;\r\n            background-color: #eeeeee;\r\n            position: relative;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n\r\n            .dpt-preview-con{\r\n                width: 100%;\r\n                height: 100%;\r\n                position: relative;\r\n                background-color: #000000;\r\n            }\r\n\r\n            .dpt-preview-con.ar916{\r\n                width: 202.5px;\r\n            }\r\n\r\n        }\r\n        \r\n\r\n        .render-box {\r\n            width: 100%;\r\n            height: 100%;\r\n            position: absolute;\r\n            left: 0;\r\n            top: 0;\r\n\r\n            .render-default{\r\n                position: absolute;\r\n                left: 0;\r\n                top: 0;\r\n                width: 100%;\r\n                height: 100%;\r\n                z-index: 1;\r\n                background-color: rgb(52, 105, 105);\r\n            }\r\n\r\n            .render-img{\r\n                position: absolute;\r\n                left: 0;\r\n                top: 0;\r\n                width: 100%;\r\n                height: 100%;\r\n                z-index: 2;\r\n            }\r\n\r\n            &.watermark-box img{\r\n                position: absolute;\r\n            }\r\n        }\r\n    }\r\n\r\n    \r\n    \r\n}\r\n</style>"]}]}