{"remainingRequest":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zbywjq/Desktop/cloudwork/VideoBatches/src/views/components/MyDefTool.vue?vue&type=style&index=0&id=7e162b32&lang=scss&scoped=true&","dependencies":[{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/src/views/components/MyDefTool.vue","mtime":1596418914803},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLy/mlrnlnZflrr3luqYKJHJlY3RXOiAxNnB4OwovL2RlZm1pbnRvb2zovrnmoYblrr3luqYKJGJvcmRlclc6IDNweDsKCi5hYnNvbHV0ZXsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKfQoubXlkZWYtdG9vbHsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAxMDAlOwogICAgLy8gYm9yZGVyOiAxcHggc29saWQgIzAwMDsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKCiAgICAubXlkZWYtbWFza3sKICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgYm9yZGVyLXN0eWxlOiBzb2xpZDsKICAgICAgICBib3JkZXItY29sb3I6IHJnYmEoMCwwLDAsMC41KTsKICAgIH0KCiAgICAubXlkZWYtdG9vbC1jaGlsZCB7CiAgICAgICAgei1pbmRleDogMzA7CiAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgIC8vIGJvcmRlcjogMXB4IGRhc2hlZCAjZmZmZmZmOwogICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMwMGMwZmU7CiAgICAgICAgY3Vyc29yOiBtb3ZlOwoKICAgICAgICAubWludG9vbHsKICAgICAgICAgICAgd2lkdGg6ICRyZWN0VzsKICAgICAgICAgICAgaGVpZ2h0OiAkcmVjdFc7CiAgICAgICAgICAgIC8vIGJhY2tncm91bmQ6ICMwMDAwMDA7CiAgICAgICAgICAgIGJvcmRlcjogJGJvcmRlclcgc29saWQgIzAwYzBmZTsKICAgICAgICB9CgogICAgICAgIC5taW50b29sLmhpZGV7CiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgICAgfQoKICAgICAgICAvLyAubWluLWJnLWRyYWd7CiAgICAgICAgLy8gICAgIHdpZHRoOiAxMDAlOwogICAgICAgIC8vICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgLy8gICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LDAsMCwwLjIpOwogICAgICAgIC8vICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgLy8gfQoKICAgICAgICAubWluLWxlZnQtdG9wewogICAgICAgICAgICBsZWZ0OiAtJGJvcmRlclc7CiAgICAgICAgICAgIHRvcDogLSRib3JkZXJXOwogICAgICAgICAgICBib3JkZXItcmlnaHQ6IG5vbmU7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7CiAgICAgICAgICAgIC8vIHRyYW5zZm9ybTogdHJhbnNsYXRlKC0kcmVjdFcvMiwtJHJlY3RXLzIpOwogICAgICAgICAgICBjdXJzb3I6IG53LXJlc2l6ZTsKICAgICAgICB9CgogICAgICAgIC5taW4tbGVmdC1jZW50ZXJ7CiAgICAgICAgICAgIGxlZnQ6IC0kYm9yZGVyVzsKICAgICAgICAgICAgdG9wOiA1MCU7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsLSRyZWN0Vy8yKTsKICAgICAgICAgICAgYm9yZGVyLXRvcDogbm9uZTsKICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiBub25lOwogICAgICAgICAgICBib3JkZXItYm90dG9tOiBub25lOwogICAgICAgICAgICBjdXJzb3I6IHctcmVzaXplOwogICAgICAgIH0KCiAgICAgICAgLm1pbi1sZWZ0LWJvdHRvbXsKICAgICAgICAgICAgbGVmdDogLSRib3JkZXJXOwogICAgICAgICAgICBib3R0b206IC0kYm9yZGVyVzsKICAgICAgICAgICAgYm9yZGVyLXRvcDogbm9uZTsKICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiBub25lOwogICAgICAgICAgICAvLyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtJHJlY3RXLzIsJHJlY3RXLzIpOwogICAgICAgICAgICBjdXJzb3I6IG5lLXJlc2l6ZTsKICAgICAgICB9CgogICAgICAgIC5taW4tY2VudGVyLXRvcHsKICAgICAgICAgICAgbGVmdDogNTAlOwogICAgICAgICAgICB0b3A6IC0kYm9yZGVyVzsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLSRyZWN0Vy8yLDApOwogICAgICAgICAgICBib3JkZXItbGVmdDogbm9uZTsKICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiBub25lOwogICAgICAgICAgICBib3JkZXItYm90dG9tOiBub25lOwogICAgICAgICAgICBjdXJzb3I6IG4tcmVzaXplOwogICAgICAgIH0KCiAgICAgICAgLm1pbi1jZW50ZXItYm90dG9tewogICAgICAgICAgICBsZWZ0OiA1MCU7CiAgICAgICAgICAgIGJvdHRvbTogLSRib3JkZXJXOwogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtJHJlY3RXLzIsMCk7CiAgICAgICAgICAgIGJvcmRlci10b3A6IG5vbmU7CiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiBub25lOwogICAgICAgICAgICBib3JkZXItcmlnaHQ6IG5vbmU7CiAgICAgICAgICAgIGN1cnNvcjogbi1yZXNpemU7CiAgICAgICAgfQoKICAgICAgICAubWluLXJpZ2h0LXRvcHsKICAgICAgICAgICAgbGVmdDogaW5pdGlhbDsKICAgICAgICAgICAgcmlnaHQ6IC0kYm9yZGVyVzsKICAgICAgICAgICAgdG9wOiAtJGJvcmRlclc7CiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiBub25lOwogICAgICAgICAgICBib3JkZXItYm90dG9tOiBub25lOwogICAgICAgICAgICAvLyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgkcmVjdFcvMiwtJHJlY3RXLzIpOwogICAgICAgICAgICBjdXJzb3I6IG5lLXJlc2l6ZTsKICAgICAgICB9CgogICAgICAgIC5taW4tcmlnaHQtY2VudGVyewogICAgICAgICAgICBsZWZ0OiBpbml0aWFsOwogICAgICAgICAgICByaWdodDogLSRib3JkZXJXOwogICAgICAgICAgICB0b3A6IDUwJTsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwtJHJlY3RXLzIpOwogICAgICAgICAgICBib3JkZXItdG9wOiBub25lOwogICAgICAgICAgICBib3JkZXItbGVmdDogbm9uZTsKICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogbm9uZTsKICAgICAgICAgICAgY3Vyc29yOiB3LXJlc2l6ZTsKICAgICAgICB9CgogICAgICAgIC5taW4tcmlnaHQtYm90dG9tewogICAgICAgICAgICBsZWZ0OiBpbml0aWFsOwogICAgICAgICAgICByaWdodDogLSRib3JkZXJXOwogICAgICAgICAgICBib3R0b206IC0kYm9yZGVyVzsKICAgICAgICAgICAgLy8gdHJhbnNmb3JtOiB0cmFuc2xhdGUoJHJlY3RXLzIsJHJlY3RXLzIpOwogICAgICAgICAgICBib3JkZXItbGVmdDogbm9uZTsKICAgICAgICAgICAgYm9yZGVyLXRvcDogbm9uZTsKICAgICAgICAgICAgY3Vyc29yOiBudy1yZXNpemU7CiAgICAgICAgfQoKICAgIH0KfQogICAgCg=="},{"version":3,"sources":["MyDefTool.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwZA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"MyDefTool.vue","sourceRoot":"src/views/components","sourcesContent":["<template>\n    <div class=\"mydef-tool absolute\">\n        <div class=\"mydef-mask absolute\"\n        :style=\"{'border-left-width':borderLeft,'border-right-width':borderRight,'border-top-width':borderTop,'border-bottom-width':borderBottom}\">\n        </div>\n        <div class=\"mydef-tool-child absolute\" \n        :style=\"{'left':defPos.x+'px','top':defPos.y+'px','width':defPos.w+'px','height':defPos.h+'px'}\"\n        moveType=\"0\" \n        @mousedown=\"btnsMouseDownHandler\">\n            <div class=\"mintool min-left-top absolute\" moveType=\"1\" @mousedown=\"btnsMouseDownHandler\"></div>\n            <div class=\"mintool min-left-center absolute\" moveType=\"2\" @mousedown=\"btnsMouseDownHandler\"></div>\n            <div class=\"mintool min-left-bottom absolute\" moveType=\"3\" @mousedown=\"btnsMouseDownHandler\"></div>\n            <div class=\"mintool min-center-top absolute\" moveType=\"4\" @mousedown=\"btnsMouseDownHandler\"></div>\n            <div class=\"mintool min-center-bottom absolute\" moveType=\"5\" @mousedown=\"btnsMouseDownHandler\"></div>\n            <div class=\"mintool min-right-top absolute\" moveType=\"6\" @mousedown=\"btnsMouseDownHandler\"></div>\n            <div class=\"mintool min-right-center absolute\" moveType=\"7\" @mousedown=\"btnsMouseDownHandler\"></div>\n            <div class=\"mintool min-right-bottom absolute\" moveType=\"8\" @mousedown=\"btnsMouseDownHandler\"></div>\n            <!-- <div class=\"mintool min-bg-drag absolute\"></div> -->\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name:'mydef-tool',\n    props:{\n        scaleWH:{\n            type:String,\n            default:'0:0'\n        },\n        useCtrlScale:{\n            type:Boolean,\n            default:false\n        },\n        minLimitWH:{\n            type:String,\n            default:'16:16'\n        },\n        minLimitScale:{\n            type:Number,\n            default:0\n        }\n    },\n    data (){\n        return {\n            limitPos:{\n                x:0,\n                y:0,\n                w:0,\n                h:0\n            },\n            defPos:{\n                x:0,\n                y:0,\n                w:0,\n                h:0\n            },\n            scalePos:{\n                x:0,\n                y:0,\n                w:1,\n                h:1\n            },\n            scaleW:0,\n            scaleH:0,\n            minLimitW:16,\n            minLimitH:16,\n            ctrlKey:false,\n        }\n    },\n    computed:{\n        borderLeft(){\n            return this.defPos.x+'px';\n        },\n        borderRight(){\n            return (this.limitPos.w-this.defPos.w-this.defPos.x)+'px';\n        },\n        borderTop(){\n            return this.defPos.y+'px';\n        },\n        borderBottom(){\n            return (this.limitPos.h-this.defPos.h-this.defPos.y)+'px';\n        }\n    },\n    watch:{\n        minLimitWH:{\n            deep:true,\n            handler(newVal){\n                let arr = newVal.split(':');\n                this.minLimitW = parseInt(arr[0]);\n                this.minLimitH = parseInt(arr[1]);\n            }\n        }\n    },\n    created(){\n        document.addEventListener('keydown',this.keydownHandler);\n        document.addEventListener('keyup',this.keydownHandler);\n    },\n    destroyed(){\n        document.removeEventListener('keydown',this.keydownHandler);\n        document.removeEventListener('keyup',this.keydownHandler);\n    },\n    mounted(){\n        this.limitPos.w = this.$el.offsetWidth;\n        this.limitPos.h = this.$el.offsetHeight;\n        if(this.minLimitScale > 0){\n            this.minLimitW = this.minLimitScale * this.limitPos.w;\n            this.minLimitH = this.minLimitScale * this.limitPos.h;\n        }\n\n        this.defPos = Object.assign(this.defPos,this.limitPos);\n        const resizeObserver = new ResizeObserver(this.resizeChangeWH);\n        resizeObserver.observe(this.$el);\n    },\n    methods:{\n        resizeChangeWH(entries){\n\t\t\t// console.log(entries)\n            for (let entry of entries) {\n                if(entry.target == this.$el){\n                    \n                    this.limitPos.w = entry.contentRect.width;//this.$el.offsetWidth;\n                    this.limitPos.h = entry.contentRect.height;//this.$el.offsetHeight;\n\n                    this.defPos.x = this.scalePos.x * this.limitPos.w;\n                    this.defPos.y = this.scalePos.y * this.limitPos.h;\n                    this.defPos.w = this.scalePos.w * this.limitPos.w;\n                    this.defPos.h = this.scalePos.h * this.limitPos.h;\n\n                    if(this.minLimitScale > 0){\n                        this.minLimitW = this.minLimitScale * this.limitPos.w;\n                        this.minLimitH = this.minLimitScale * this.limitPos.h;\n                    }\n                }\n            }\n        },\n        btnsMouseDownHandler(event) {\n            let e = event ? event : window.event;\n            e.preventDefault();\n            e.stopPropagation();\n\n            let self = this;\n            let moveType = parseInt(e.target.getAttribute('movetype'));//0为移动\n            // console.log('moveType',moveType)\n            let mouseX = e.clientX,mouseY = e.clientY;\n            let beforePos = Object.assign({},self.defPos);\n\n            let arr = this.scaleWH.split(':');\n            let scaleW = parseInt(arr[0]);\n            let scaleH = parseInt(arr[1]);\n            \n            document.addEventListener('mousemove',mousemoveHandler);\n            document.addEventListener('mouseup',mouseupHandler);\n\n\n            function mousemoveHandler(event){\n                event.preventDefault();\n                if(self.useCtrlScale){\n                    if(self.ctrlKey){\n                        self.scaleW = scaleW;\n                        self.scaleH = scaleH;\n                    }else{\n                        self.scaleW = 0;\n                        self.scaleH = 0;\n                    }\n                }else{\n                    self.scaleW = scaleW;\n                    self.scaleH = scaleH;\n                }\n                self.computerPos(moveType,beforePos,event.clientX-mouseX,event.clientY-mouseY);\n            }\n\n            function mouseupHandler(event){\n                event.preventDefault();\n\n                document.removeEventListener('mousemove',mousemoveHandler);\n                document.removeEventListener('mouseup',mouseupHandler);\n\n\n            }\n            // console.log(e.target.classList,e.target === btnLT,moveType)\n        },\n        /**\n         * 计算最终位置\n         */\n        computerPos (moveType,beforePos,diffX,diffY){\n            const curPos = {\n                x:0,\n                y:0,\n                w:0,\n                h:0\n            }\n            \n            const rectPos = {\n                centerx: 0,\n                centery: 0,\n                curx: 0,\n                cury: 0\n            }\n            //仅移动\n            if(moveType === 0){\n                curPos.x = Math.max(beforePos.x + diffX,0);\n                curPos.x = Math.min(this.limitPos.w - beforePos.w,curPos.x);\n                curPos.y = Math.max(beforePos.y + diffY,0);\n                curPos.y = Math.min(this.limitPos.h - beforePos.h,curPos.y);\n                curPos.w = beforePos.w;\n                curPos.h = beforePos.h;\n            }\n            //左上\n            else if(moveType === 1){\n                rectPos.centerx = beforePos.x + beforePos.w;\n                rectPos.centery = beforePos.y + beforePos.h;\n                rectPos.curx = beforePos.x + diffX;\n                rectPos.cury = beforePos.y + diffY;\n                \n                let minW = this.minLimitW;\n                let minH = this.minLimitH;\n                curPos.w = Math.min(rectPos.centerx - rectPos.curx,rectPos.centerx);\n                curPos.w = Math.max(curPos.w,minW);\n                curPos.h = Math.min(rectPos.centery - rectPos.cury,rectPos.centery);\n                curPos.h = Math.max(curPos.h,minH);\n                if(this.scaleW > 0 && this.scaleH > 0){\n                    minW = minH * this.scaleW/this.scaleH;\n                    curPos.w = Math.max(curPos.w,minW);\n                    curPos.w = Math.min((rectPos.centery) * this.scaleW/this.scaleH,curPos.w);\n                    curPos.h = curPos.w * this.scaleH/this.scaleW;\n                }\n\n                curPos.x = rectPos.centerx - curPos.w;\n                curPos.y = rectPos.centery - curPos.h;\n                \n            }\n            //左中\n            else if(moveType === 2){\n                rectPos.centerx = beforePos.x + beforePos.w;\n                // rectPos.centery = beforePos.y + beforePos.h/2;\n                rectPos.curx = beforePos.x + diffX;\n                // rectPos.cury = beforePos.y + diffY;\n                \n                let minW = this.minLimitW;\n                let minH = this.minLimitH;\n                curPos.w = Math.min(rectPos.centerx - rectPos.curx,rectPos.centerx);\n                curPos.w = Math.max(curPos.w,minW);\n                curPos.h = beforePos.h;\n                if(this.scaleW > 0 && this.scaleH > 0){\n                    minW = minH * this.scaleW/this.scaleH;\n                    curPos.w = Math.max(curPos.w,minW);\n                    curPos.w = Math.min((this.limitPos.h - beforePos.y) * this.scaleW/this.scaleH,curPos.w);\n                    curPos.h = curPos.w * this.scaleH/this.scaleW;\n                }\n\n                curPos.x = rectPos.centerx - curPos.w;\n                curPos.y = beforePos.y;\n            }\n            //左下\n            else if(moveType === 3){\n                rectPos.centerx = beforePos.x + beforePos.w;\n                rectPos.centery = beforePos.y;\n                rectPos.curx = beforePos.x + diffX;\n                rectPos.cury = beforePos.y + beforePos.h + diffY;\n\n                let minW = this.minLimitW;\n                let minH = this.minLimitH;\n                curPos.w = Math.min(rectPos.centerx - rectPos.curx,rectPos.centerx);\n                curPos.w = Math.max(curPos.w,minW);\n                curPos.h = Math.min(rectPos.cury - rectPos.centery,this.limitPos.h - rectPos.centery);\n                curPos.h = Math.max(curPos.h,minH);\n                if(this.scaleW > 0 && this.scaleH > 0){\n                    minW = minH * this.scaleW/this.scaleH;\n                    curPos.w = Math.max(curPos.w,minW);\n                    curPos.w = Math.min((this.limitPos.h - rectPos.centery) * this.scaleW/this.scaleH,curPos.w);\n                    curPos.h = curPos.w * this.scaleH/this.scaleW;\n                }\n\n                curPos.x = rectPos.centerx - curPos.w;\n                curPos.y = rectPos.centery;\n            }\n            //中上\n            else if(moveType === 4){\n                rectPos.centery = beforePos.y + beforePos.h;\n                rectPos.cury = beforePos.y + diffY;\n                \n                let minW = this.minLimitW;\n                let minH = this.minLimitH;\n                curPos.h = Math.min(rectPos.centery - rectPos.cury,rectPos.centery);\n                curPos.h = Math.max(curPos.h,minH);\n                curPos.w = beforePos.w;\n                if(this.scaleW > 0 && this.scaleH > 0){\n                    minH = minH * this.scaleH/this.scaleW;\n                    curPos.h = Math.max(curPos.h,minH);\n                    curPos.h = Math.min( (this.limitPos.w - beforePos.x) * this.scaleH/this.scaleW,curPos.h);\n                    curPos.w = curPos.h * this.scaleW/this.scaleH;\n                }\n\n                curPos.x = beforePos.x;\n                curPos.y = rectPos.centery - curPos.h;\n            }\n            //中下\n            else if(moveType === 5){\n                rectPos.centery = beforePos.y;\n                rectPos.cury = beforePos.y  + beforePos.h + diffY;\n                \n                let minW = this.minLimitW;\n                let minH = this.minLimitH;\n                curPos.h = Math.min(rectPos.cury - rectPos.centery,this.limitPos.h - rectPos.centery);\n                curPos.h = Math.max(curPos.h,minH);\n                curPos.w = beforePos.w;\n                if(this.scaleW > 0 && this.scaleH > 0){\n                    minH = minH * this.scaleH/this.scaleW;\n                    curPos.h = Math.max(curPos.h,minH);\n                    curPos.h = Math.min( (this.limitPos.w - beforePos.x) * this.scaleH/this.scaleW,curPos.h);\n                    curPos.w = curPos.h * this.scaleW/this.scaleH;\n                }\n\n                curPos.x = beforePos.x;\n                curPos.y = beforePos.y;\n            }\n            //右上\n            else if(moveType === 6){\n                rectPos.centerx = beforePos.x;\n                rectPos.centery = beforePos.y + beforePos.h;\n                rectPos.curx = beforePos.x + beforePos.w + diffX;\n                rectPos.cury = beforePos.y + diffY;\n\n                let minW = this.minLimitW;\n                let minH = this.minLimitH;\n                curPos.w = Math.min(rectPos.curx - rectPos.centerx,this.limitPos.w - rectPos.centerx);\n                curPos.w = Math.max(curPos.w,minW);\n                curPos.h = Math.min(rectPos.centery - rectPos.cury,rectPos.centery);\n                curPos.h = Math.max(curPos.h,minH);\n                if(this.scaleW > 0 && this.scaleH > 0){\n                    minW = minH * this.scaleW/this.scaleH;\n                    curPos.w = Math.max(curPos.w,minW);\n                    curPos.w = Math.min((rectPos.centery) * this.scaleW/this.scaleH,curPos.w);\n                    curPos.h = curPos.w * this.scaleH/this.scaleW;\n                }\n\n                curPos.x = rectPos.centerx;\n                curPos.y = rectPos.centery - curPos.h;\n            }\n            //右中\n            else if(moveType === 7){\n                rectPos.centerx = beforePos.x;\n                // rectPos.centery = beforePos.y + beforePos.h/2;\n                rectPos.curx = beforePos.x + beforePos.w + diffX;\n                // rectPos.cury = beforePos.y + diffY;\n                \n                let minW = this.minLimitW;\n                let minH = this.minLimitH;\n                curPos.w = Math.min(rectPos.curx - rectPos.centerx,this.limitPos.w - rectPos.centerx);\n                curPos.w = Math.max(curPos.w,minW);\n                curPos.h = beforePos.h;\n                if(this.scaleW > 0 && this.scaleH > 0){\n                    minW = minH * this.scaleW/this.scaleH;\n                    curPos.w = Math.max(curPos.w,minW);\n                    curPos.w = Math.min((this.limitPos.h - beforePos.y) * this.scaleW/this.scaleH,curPos.w);\n                    curPos.h = curPos.w * this.scaleH/this.scaleW;\n                }\n\n                curPos.x = rectPos.centerx;\n                curPos.y = beforePos.y;\n            }\n            //右下\n            else if(moveType === 8){\n                rectPos.centerx = beforePos.x;\n                rectPos.centery = beforePos.y;\n                rectPos.curx = beforePos.x + beforePos.w + diffX;\n                rectPos.cury = beforePos.y + beforePos.h + diffY;\n                curPos.x = beforePos.x;\n                curPos.y = beforePos.y;\n\n                let minW = this.minLimitW;\n                let minH = this.minLimitH;\n                curPos.w = Math.min(rectPos.curx - rectPos.centerx,this.limitPos.w-rectPos.centerx);\n                curPos.w = Math.max(curPos.w,minW);\n                curPos.h = Math.min(rectPos.cury - rectPos.centery,this.limitPos.h-rectPos.centery);\n                curPos.h = Math.max(curPos.h,minH);\n                if(this.scaleW > 0 && this.scaleH > 0){\n                    minW = minH * this.scaleW/this.scaleH;\n                    curPos.w = Math.max(curPos.w,minW);\n                    curPos.w = Math.min((this.limitPos.h-rectPos.centery) * this.scaleW/this.scaleH,curPos.w);\n                    curPos.h = curPos.w * this.scaleH/this.scaleW;\n                }\n                \n            }\n            this.defPos = curPos;\n            \n            this.scalePos.x = this.defPos.x/this.limitPos.w;\n            this.scalePos.y = this.defPos.y/this.limitPos.h;\n            this.scalePos.w = this.defPos.w/this.limitPos.w;\n            this.scalePos.h = this.defPos.h/this.limitPos.h;\n\n            this.$emit('change',this.scalePos);\n        },\n        keydownHandler(event){\n            // console.log('event',event)\n            this.ctrlKey = event.ctrlKey;\n        },\n        resetPos(scalePos){\n            Object.assign(this.scalePos,scalePos);\n        },\n        getPos(){\n            return Object.assign({},this.scalePos);\n        },\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n//方块宽度\n$rectW: 16px;\n//defmintool边框宽度\n$borderW: 3px;\n\n.absolute{\n    position: absolute;\n}\n.mydef-tool{\n    width: 100%;\n    height: 100%;\n    // border: 1px solid #000;\n    position: absolute;\n\n    .mydef-mask{\n        width: 100%;\n        height: 100%;\n        border-style: solid;\n        border-color: rgba(0,0,0,0.5);\n    }\n\n    .mydef-tool-child {\n        z-index: 30;\n        width: 100%;\n        height: 100%;\n        // border: 1px dashed #ffffff;\n        border: 1px solid #00c0fe;\n        cursor: move;\n\n        .mintool{\n            width: $rectW;\n            height: $rectW;\n            // background: #000000;\n            border: $borderW solid #00c0fe;\n        }\n\n        .mintool.hide{\n            display: none;\n        }\n\n        // .min-bg-drag{\n        //     width: 100%;\n        //     height: 100%;\n        //     background-color: rgba(255,0,0,0.2);\n        //     border: none;\n        // }\n\n        .min-left-top{\n            left: -$borderW;\n            top: -$borderW;\n            border-right: none;\n            border-bottom: none;\n            // transform: translate(-$rectW/2,-$rectW/2);\n            cursor: nw-resize;\n        }\n\n        .min-left-center{\n            left: -$borderW;\n            top: 50%;\n            transform: translate(0,-$rectW/2);\n            border-top: none;\n            border-right: none;\n            border-bottom: none;\n            cursor: w-resize;\n        }\n\n        .min-left-bottom{\n            left: -$borderW;\n            bottom: -$borderW;\n            border-top: none;\n            border-right: none;\n            // transform: translate(-$rectW/2,$rectW/2);\n            cursor: ne-resize;\n        }\n\n        .min-center-top{\n            left: 50%;\n            top: -$borderW;\n            transform: translate(-$rectW/2,0);\n            border-left: none;\n            border-right: none;\n            border-bottom: none;\n            cursor: n-resize;\n        }\n\n        .min-center-bottom{\n            left: 50%;\n            bottom: -$borderW;\n            transform: translate(-$rectW/2,0);\n            border-top: none;\n            border-left: none;\n            border-right: none;\n            cursor: n-resize;\n        }\n\n        .min-right-top{\n            left: initial;\n            right: -$borderW;\n            top: -$borderW;\n            border-left: none;\n            border-bottom: none;\n            // transform: translate($rectW/2,-$rectW/2);\n            cursor: ne-resize;\n        }\n\n        .min-right-center{\n            left: initial;\n            right: -$borderW;\n            top: 50%;\n            transform: translate(0,-$rectW/2);\n            border-top: none;\n            border-left: none;\n            border-bottom: none;\n            cursor: w-resize;\n        }\n\n        .min-right-bottom{\n            left: initial;\n            right: -$borderW;\n            bottom: -$borderW;\n            // transform: translate($rectW/2,$rectW/2);\n            border-left: none;\n            border-top: none;\n            cursor: nw-resize;\n        }\n\n    }\n}\n    \n</style>"]}]}