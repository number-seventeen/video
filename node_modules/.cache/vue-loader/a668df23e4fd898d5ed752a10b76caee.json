{"remainingRequest":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zbywjq/Desktop/cloudwork/VideoBatches/src/views/edit/Sort.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/src/views/edit/Sort.vue","mtime":1600608611997},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIHByb3BzOnsKICAgICAgICB2c29ydDp7CiAgICAgICAgICAgIHJlcXVpcmVkOnRydWUKICAgICAgICB9CiAgICB9LAogICAgZGF0YSgpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgY2hvb3NlZDowLAogICAgICAgICAgICB2bGlzdDoiIiwKICAgICAgICAgICAgdmFycjpbXSwKICAgICAgICAgICAgbnVtYmVyczowLAogICAgICAgICAgICBuZXdpbmRleDowLAogICAgICAgICAgICB3aWxsWDowLAogICAgICAgICAgICBuOjAsCiAgICAgICAgICAgIGRyYWdnaW5nOm51bGwsLy/ooqvmi5bmi73nmoTlr7nosaEKICAgICAgICAgICAgdGFyZ2V0Om51bGwsLy/nm67moIflr7nosaEKICAgICAgICAgICAgY2M6MCwKICAgICAgICAgICAgdGltZXI6bnVsbCwKICAgICAgICAgICAgbm9zOmZhbHNlLAogICAgICAgICAgICBzdGltZTowLAogICAgICAgICAgICBzc3RpbWVzOm51bGwsCiAgICAgICAgICAgIHN0aXRsZTonJywKCiAgICAgICAgfQogICAgfSwKICAgCiAgICBiZWZvcmVEZXN0cm95KCkgewogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7ICAgICAgICAKICAgICAgICB0aGlzLnRpbWVyID0gbnVsbDsKICAgIH0sCiAgICBtb3VudGVkKCl7CiAgICAgICAgdGhpcy5jdXJTZWxlY3RzID0gdGhpcy4kc3RvcmUuc3RhdGUuYXBwU3RvcmUuY3VyU2VsZWN0czsKICAgICAgICBmb3IgKHRoaXMuY2hvb3NlZCA9IDA7IHRoaXMuY2hvb3NlZCA8IHRoaXMuY3VyU2VsZWN0cy5sZW5ndGg7IHRoaXMuY2hvb3NlZCsrKSB7CiAgICAgICAgICAgICB0aGlzLnZsaXN0PXRoaXMuY3VyU2VsZWN0c1t0aGlzLmNob29zZWRdLnByZVVybAogICAgICAgICAgICAgdGhpcy5zdGltZT10aGlzLmN1clNlbGVjdHNbdGhpcy5jaG9vc2VkXS5kdXJhdGlvbgogICAgICAgICAgICAgdGhpcy5zc3RpbWVzPXRoaXMuc2VjVG90aW1lKHRoaXMuc3RpbWUvMTAwMCkgCiAgICAgICAgICAgICB0aGlzLnN0aXRpZT10aGlzLmN1clNlbGVjdHNbdGhpcy5jaG9vc2VkXS50aXRsZQogICAgICAgICAgICAgdGhpcy5zd2lkdGg9dGhpcy5jdXJTZWxlY3RzW3RoaXMuY2hvb3NlZF0ud2lkdGgKICAgICAgICAgICAgIHRoaXMudmFyci5wdXNoKHt1cmw6dGhpcy52bGlzdCxpZDp0aGlzLmNob29zZWQsZHVyOnRoaXMuc3RpbWVzLHRpdGxlOnRoaXMuc3RpdGllLGRkOnRoaXMuc3RpbWUsd2lkdGg6dGhpcy5zd2lkdGh9KQogICAgICAgICAgICAgICAgICAgIAogICAgICAgIH0KICAgIH0sCiAgICAKICAgIG1ldGhvZHM6ewogICAgICAgIGhhbmRsZURyYWdTdGFydChlLGluZGV4LHYpewogICAgICAgICAgICB0aGlzLmRyYWdnaW5nID0gdjsKICAgICAgICAgICAgY29uc29sZS5sb2coIm4iLHRoaXMudmFyclswXS5kZCkKICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIH0sCiAgICAgICAgaGFuZGxlRHJhZ0VuZChlLGluZGV4LHYpewogICAgICAgICAgICB0aGlzLmRyYWdnaW5nLmlkPXRoaXMuY2MKICAgICAgICAgICAgdGhpcy5kcmFnZ2luZyA9IG51bGwKICAgICAgICAgICAgY29uc29sZS5sb2coIm8iLHRoaXMudmFyclswXS5kZCkKICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIH0sCiAgICAgICAgaGFuZGxlRHJhZ092ZXIoZSkgewogICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ21vdmUnLy8gZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdD0ibW92ZSI7Ly/lnKhkcmFnZW50ZXLkuK3pkojlr7nmlL7nva7nm67moIfmnaXorr7nva4hCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVEcmFnRW50ZXIoZSxpbmRleCx2KXsKICAgICAgICAgICAgZS5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9ICJtb3ZlIi8v5Li66ZyA6KaB56e75Yqo55qE5YWD57Sg6K6+572uZHJhZ3N0YXJ05LqL5Lu2CiAgICAgICAgICAgIGlmKHYgPT09IHRoaXMuZHJhZ2dpbmcpewogICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBuZXdJdGVtcyA9IFsuLi50aGlzLnZhcnJdCiAgICAgICAgICAgIGNvbnN0IHNyYyA9IG5ld0l0ZW1zLmluZGV4T2YodGhpcy5kcmFnZ2luZykvL+iiq+aLluaLveWFg+e0oAogICAgICAgICAgICBjb25zdCBkc3QgPSBuZXdJdGVtcy5pbmRleE9mKHYpLy/mi5bmi73ml7bnu4/ov4fnmoTlhYPntKAKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coImRkZCIsZHN0KQogICAgICAgICAgICBpZihzcmM8ZHN0KXsKICAgICAgICAgICAgICAgIHYuaWQ9di5pZC0xICAgCiAgICAgICAgICAgIH0gICAKICAgICAgICAgICAgZWxzZSBpZihzcmM+ZHN0KXsKICAgICAgICAgICAgICAgIHYuaWQ9di5pZCsxCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIG09dGhpcy52YXJyLmxlbmd0aAogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ2bGlzdHMiKVttLTFdLm9mZnNldFRvcCkKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgidmxpc3RzIilbMF0ub2Zmc2V0VG9wKQogICAgICAgICAgICB2YXIgZGM9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgic29ydC1ib3giKVswXS5jbGllbnRIZWlnaHQtMTE1CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJndXlneSIsZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgic29ydC1ib3giKVswXS5zY3JvbGxIZWlnaHQpCiAgICAgICAgICAgIGlmKGRjLWUuY2xpZW50WTw9MTApewogICAgICAgICAgICAgICAgdGhpcy50aW1lcj1zZXRJbnRlcnZhbCh0aGlzLm1vdXNlbW92ZSgxKSw1MDApCiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgCiAgICAgICAgICAgIGVsc2UgaWYoZGMtZS5jbGllbnRZPjM1MCl7CiAgICAgICAgICAgICAgICB0aGlzLnRpbWVyPXNldEludGVydmFsKHRoaXMubW91c2Vtb3ZlKC0xKSw1MDApCiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpICAKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmNjPW5ld0l0ZW1zLmluZGV4T2YodikKICAgICAgICAgICAgbmV3SXRlbXMuc3BsaWNlKGRzdCwgMCwgLi4ubmV3SXRlbXMuc3BsaWNlKHNyYywgMSkpCiAgICAgICAgICAgIHRoaXMubnVtYmVycz1pbmRleAogICAgICAgICAgICB0aGlzLnZhcnIgPSBuZXdJdGVtcwogICAgICAgIH0sCiAgICAgICAgY2hhbmdlc29ydChpbmRleCl7CiAgICAgICAgICAgIHRoaXMubnVtYmVycz1pbmRleAogICAgICAgICAgIAogICAgICAgIH0sCiAgICAgICAgbW91c2Vtb3ZlKGUpewogICAgICAgICAgICBpZihlPT09MSl7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJzb3J0LWJveCIpWzBdLnNjcm9sbFRvcD1kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJzb3J0LWJveCIpWzBdLnNjcm9sbFRvcCs4MAogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgic29ydC1ib3giKVswXS5vbnNjcm9sbD1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJoYW8iKQogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmKGU9PT0tMSl7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJzb3J0LWJveCIpWzBdLnNjcm9sbFRvcD1kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJzb3J0LWJveCIpWzBdLnNjcm9sbFRvcC04MAogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgic29ydC1ib3giKVswXS5vbnNjcm9sbD1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJoYW9idWhhbyIpCiAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICB9CiAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIH0sCiAgICAgICAgc2JhY2soKXsKICAgICAgICAgICAgdGhpcy5ub3M9ZmFsc2UKICAgICAgICAgICAgdGhpcy4kZW1pdCgic3NvcnQiLHRoaXMubm9zKQogICAgICAgIH0sCiAgICAgICAgc3N1cmUoKXsKICAgICAgICAgICAgdGhpcy5ub3M9ZmFsc2UKICAgICAgICAgICAgdGhpcy4kZW1pdCgiaGF2ZXNvcnQiLHRoaXMudmFycikKICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy52YXJyKQogICAgICAgICAgICB0aGlzLiRlbWl0KCJzc29ydCIsdGhpcy5ub3MpCiAgICAgICAgICAgIAogICAgICAgIH0sCiAgICAgICAgc2VjVG90aW1lKHMpIHsKICAgICAgICAgICAgdmFyIHQKICAgICAgICAgICAgaWYocyA+IC0xKXsKICAgICAgICAgICAgICAgIHZhciBob3VyID0gTWF0aC5mbG9vcihzLzM2MDApCiAgICAgICAgICAgICAgICB2YXIgbWluID0gTWF0aC5mbG9vcihzLzYwKSAlIDYwCiAgICAgICAgICAgICAgICB2YXIgc2VjID0gcyAlIDYwCiAgICAgICAgICAgICAgICBpZihob3VyIDwgMTApIHsKICAgICAgICAgICAgICAgICAgICB0ID0gJzAnKyBob3VyICsgIjoiCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHQgPSBob3VyICsgIjoiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZihtaW4gPCAxMCl7CiAgICAgICAgICAgICAgICAgICAgdCArPSAiMCIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0ICs9IG1pbiArICI6IgogICAgICAgICAgICAgICAgaWYoc2VjIDwgMTApewogICAgICAgICAgICAgICAgICAgIHQgKz0gIjAiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0ICs9IHNlYy50b0ZpeGVkKDApCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICB9LAogICAgICAgICAgIAogICAgICAgIAogICAgfQp9Cg=="},{"version":3,"sources":["Sort.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA","file":"Sort.vue","sourceRoot":"src/views/edit","sourcesContent":["<template>\n  <div class=\"sort_vue\" >\n      <div class=\"sorts\">\n        <div class=\"sort-title\"></div>\n        <div class=\"sort-titles\"></div>\n        <div class=\"sort-box\" >\n            <div class=\"vlists\" :class=\"{'vchoose':numbers==index}\" v-for=\"(v,index) in varr\" :key=\"index\"  draggable=\"true\"\n                @dragstart=\"handleDragStart($event, index,v)\"\n                @dragover.prevent=\"handleDragOver($event, index,v)\"\n                @dragenter=\"handleDragEnter($event, index,v)\"\n                @dragend=\"handleDragEnd($event, index,v)\" \n                @mousedown=\"changesort(index)\">\n                <div class=\"biaohao\">{{v.id+1}}</div>\n                <video :src=\"v.url\"  class=\"choosens\" style=\"width: 155px;height: 100px; object-fit:fill; margin-top:2px; margin-left:2px;\" ></video> \n            </div>  \n        </div>\n        <div class=\"changesort\">\n            <div class=\"left-button\" ><el-button size=\"medium\" @click=\"sback()\">返回</el-button></div><div class=\"right-button\" ><el-button size=\"medium\" @click=\"ssure()\">确定</el-button></div>\n        </div>\n      </div>\n\n  </div>\n</template>\n\n<script>\nexport default {\n    props:{\n        vsort:{\n            required:true\n        }\n    },\n    data(){\n        return{\n            choosed:0,\n            vlist:\"\",\n            varr:[],\n            numbers:0,\n            newindex:0,\n            willX:0,\n            n:0,\n            dragging:null,//被拖拽的对象\n            target:null,//目标对象\n            cc:0,\n            timer:null,\n            nos:false,\n            stime:0,\n            sstimes:null,\n            stitle:'',\n\n        }\n    },\n   \n    beforeDestroy() {\n        clearInterval(this.timer);        \n        this.timer = null;\n    },\n    mounted(){\n        this.curSelects = this.$store.state.appStore.curSelects;\n        for (this.choosed = 0; this.choosed < this.curSelects.length; this.choosed++) {\n             this.vlist=this.curSelects[this.choosed].preUrl\n             this.stime=this.curSelects[this.choosed].duration\n             this.sstimes=this.secTotime(this.stime/1000) \n             this.stitie=this.curSelects[this.choosed].title\n             this.swidth=this.curSelects[this.choosed].width\n             this.varr.push({url:this.vlist,id:this.choosed,dur:this.stimes,title:this.stitie,dd:this.stime,width:this.swidth})\n                    \n        }\n    },\n    \n    methods:{\n        handleDragStart(e,index,v){\n            this.dragging = v;\n            console.log(\"n\",this.varr[0].dd)\n            \n            \n        },\n        handleDragEnd(e,index,v){\n            this.dragging.id=this.cc\n            this.dragging = null\n            console.log(\"o\",this.varr[0].dd)\n            \n            \n        },\n        handleDragOver(e) {\n            e.dataTransfer.dropEffect = 'move'// e.dataTransfer.dropEffect=\"move\";//在dragenter中针对放置目标来设置!\n        },\n        handleDragEnter(e,index,v){\n            e.dataTransfer.effectAllowed = \"move\"//为需要移动的元素设置dragstart事件\n            if(v === this.dragging){\n            return\n            }\n            const newItems = [...this.varr]\n            const src = newItems.indexOf(this.dragging)//被拖拽元素\n            const dst = newItems.indexOf(v)//拖拽时经过的元素\n            // console.log(\"ddd\",dst)\n            if(src<dst){\n                v.id=v.id-1   \n            }   \n            else if(src>dst){\n                v.id=v.id+1\n            }\n            var m=this.varr.length\n            // console.log(document.getElementsByClassName(\"vlists\")[m-1].offsetTop)\n            // console.log(document.getElementsByClassName(\"vlists\")[0].offsetTop)\n            var dc=document.getElementsByClassName(\"sort-box\")[0].clientHeight-115\n            // console.log(\"guygy\",document.getElementsByClassName(\"sort-box\")[0].scrollHeight)\n            if(dc-e.clientY<=10){\n                this.timer=setInterval(this.mousemove(1),500)\n                clearInterval(this.timer)     \n            }\n          \n            else if(dc-e.clientY>350){\n                this.timer=setInterval(this.mousemove(-1),500)\n                clearInterval(this.timer)  \n            }\n            this.cc=newItems.indexOf(v)\n            newItems.splice(dst, 0, ...newItems.splice(src, 1))\n            this.numbers=index\n            this.varr = newItems\n        },\n        changesort(index){\n            this.numbers=index\n           \n        },\n        mousemove(e){\n            if(e===1){\n                document.getElementsByClassName(\"sort-box\")[0].scrollTop=document.getElementsByClassName(\"sort-box\")[0].scrollTop+80\n                document.getElementsByClassName(\"sort-box\")[0].onscroll=function(){\n                    console.log(\"hao\")\n                } \n            }\n            else if(e===-1){\n                document.getElementsByClassName(\"sort-box\")[0].scrollTop=document.getElementsByClassName(\"sort-box\")[0].scrollTop-80\n                document.getElementsByClassName(\"sort-box\")[0].onscroll=function(){\n                    console.log(\"haobuhao\")\n                } \n            }\n           \n            \n        },\n        sback(){\n            this.nos=false\n            this.$emit(\"ssort\",this.nos)\n        },\n        ssure(){\n            this.nos=false\n            this.$emit(\"havesort\",this.varr)\n            console.log(this.varr)\n            this.$emit(\"ssort\",this.nos)\n            \n        },\n        secTotime(s) {\n            var t\n            if(s > -1){\n                var hour = Math.floor(s/3600)\n                var min = Math.floor(s/60) % 60\n                var sec = s % 60\n                if(hour < 10) {\n                    t = '0'+ hour + \":\"\n                } else {\n                    t = hour + \":\"\n                }\n                if(min < 10){\n                    t += \"0\"\n                }\n                    t += min + \":\"\n                if(sec < 10){\n                    t += \"0\"\n                }\n                t += sec.toFixed(0)\n            }\n            return t\n        },\n           \n        \n    }\n}\n</script>\n\n<style lang=\"scss\" scoped src=\"../../sort.scss\">\n\n</style>"]}]}