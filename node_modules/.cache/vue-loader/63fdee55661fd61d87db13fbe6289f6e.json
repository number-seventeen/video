{"remainingRequest":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/am-source-select/sourceSelect/components/CustomSearch.vue?vue&type=style&index=0&id=164ecfb6&lang=scss&scoped=true&","dependencies":[{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/am-source-select/sourceSelect/components/CustomSearch.vue","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5jdXN0b20tc2VhcmNoew0KICAgIHdpZHRoOiAxMDAlOw0KDQogICAgLmN1c3RvbS1zZWFyY2gtYnRuIHsNCiAgICAgICAgY29sb3I6ICNmZmZmZmY7DQogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM0MDlFRkY7DQogICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMDsNCiAgICAgICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMDsNCg0KICAgICAgICAmOmhvdmVyew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzY2YjFmZjsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["CustomSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"CustomSearch.vue","sourceRoot":"node_modules/am-source-select/sourceSelect/components","sourcesContent":["<template>\r\n    <!-- <el-input \r\n        class=\"custom-search\"\r\n        v-model=\"searchText\" \r\n        placeholder=\"请输入关键字\"\r\n        clearable\r\n        size=\"small\" \r\n        @clear=\"queryChangeHandler\"\r\n        @keyup.enter.native=\"queryChangeHandler\">\r\n            <el-button class=\"custom-search-btn\" slot=\"append\" type=\"primary\" size=\"small\" @click=\"queryChangeHandler\">搜索</el-button>\r\n    </el-input> -->\r\n    <el-autocomplete\r\n      class=\"custom-search\"\r\n      v-model=\"searchText\"\r\n      :fetch-suggestions=\"querySearch\"\r\n      placeholder=\"请输入关键字\"\r\n      clearable\r\n      size=\"small\" \r\n      @keyup.enter.native=\"queryChangeHandler\"\r\n      @clear=\"queryChangeHandler\"\r\n      @select=\"handleSelect\"\r\n      @focus=\"focusHandler\"\r\n    >\r\n        <el-button class=\"custom-search-btn\" slot=\"append\" type=\"primary\" size=\"small\" @click=\"queryChangeHandler\">搜索</el-button>\r\n    </el-autocomplete>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:'custom-search',\r\n    data(){\r\n        return {\r\n            searchText:'',\r\n            restaurants:[],\r\n            maxCacheNum:50,\r\n        }\r\n    },\r\n    created(){\r\n        \r\n    },\r\n    mounted(){\r\n        \r\n    },\r\n    methods:{\r\n        queryChangeHandler(){\r\n            this.$emit('search-change',this.searchText);\r\n            this.blurHandler();\r\n        },\r\n        focusHandler(){\r\n            //取出\r\n            let str = window.localStorage.getItem('CustomSearchCaches');\r\n            if(str){\r\n                this.restaurants = JSON.parse(str);\r\n            }\r\n        },\r\n        blurHandler(){\r\n            //写入\r\n            // { \"value\": \"三全鲜食（北新泾店）\", \"address\": \"长宁区新渔路144号\" }\r\n            if(this.searchText.length == 0) return;\r\n            let isHas = false;\r\n            for(let i=0;i<this.restaurants.length;i++){\r\n                let item = this.restaurants[i];\r\n                if(item.value.indexOf(this.searchText)>-1 && item.value.length == this.searchText.length){\r\n                    isHas = true;\r\n                    break;\r\n                }\r\n            }\r\n            if(isHas) return;\r\n            this.restaurants.unshift({value:this.searchText,address:''});\r\n            this.restaurants = this.restaurants.slice(0,this.maxCacheNum);\r\n            let str = JSON.stringify(this.restaurants);\r\n            window.localStorage.setItem('CustomSearchCaches',str);\r\n        },\r\n        handleSelect(){\r\n            this.$emit('search-change',this.searchText);\r\n        },\r\n        querySearch(queryString, cb) {\r\n            const restaurants = this.restaurants;\r\n            let results = queryString ? restaurants.filter(this.createFilter(queryString)) : restaurants;\r\n            // 调用 callback 返回建议列表的数据\r\n            cb(results);\r\n        },\r\n        createFilter(queryString) {\r\n            return (restaurant) => {\r\n                return (restaurant.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\r\n            };\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.custom-search{\r\n    width: 100%;\r\n\r\n    .custom-search-btn {\r\n        color: #ffffff;\r\n        background-color: #409EFF;\r\n        border: none;\r\n        border-top-left-radius: 0;\r\n        border-bottom-left-radius: 0;\r\n\r\n        &:hover{\r\n            background-color: #66b1ff;\r\n        }\r\n    }\r\n}\r\n</style>"]}]}