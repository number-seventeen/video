{"remainingRequest":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/am-source-select/sourceSelect/components/CustomSearch.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/am-source-select/sourceSelect/components/CustomSearch.vue","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zbywjq/Desktop/cloudwork/VideoBatches/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTonY3VzdG9tLXNlYXJjaCcsDQogICAgZGF0YSgpew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgc2VhcmNoVGV4dDonJywNCiAgICAgICAgICAgIHJlc3RhdXJhbnRzOltdLA0KICAgICAgICAgICAgbWF4Q2FjaGVOdW06NTAsDQogICAgICAgIH0NCiAgICB9LA0KICAgIGNyZWF0ZWQoKXsNCiAgICAgICAgDQogICAgfSwNCiAgICBtb3VudGVkKCl7DQogICAgICAgIA0KICAgIH0sDQogICAgbWV0aG9kczp7DQogICAgICAgIHF1ZXJ5Q2hhbmdlSGFuZGxlcigpew0KICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2VhcmNoLWNoYW5nZScsdGhpcy5zZWFyY2hUZXh0KTsNCiAgICAgICAgICAgIHRoaXMuYmx1ckhhbmRsZXIoKTsNCiAgICAgICAgfSwNCiAgICAgICAgZm9jdXNIYW5kbGVyKCl7DQogICAgICAgICAgICAvL+WPluWHug0KICAgICAgICAgICAgbGV0IHN0ciA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnQ3VzdG9tU2VhcmNoQ2FjaGVzJyk7DQogICAgICAgICAgICBpZihzdHIpew0KICAgICAgICAgICAgICAgIHRoaXMucmVzdGF1cmFudHMgPSBKU09OLnBhcnNlKHN0cik7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGJsdXJIYW5kbGVyKCl7DQogICAgICAgICAgICAvL+WGmeWFpQ0KICAgICAgICAgICAgLy8geyAidmFsdWUiOiAi5LiJ5YWo6bKc6aOf77yI5YyX5paw5rO+5bqX77yJIiwgImFkZHJlc3MiOiAi6ZW/5a6B5Yy65paw5riU6LevMTQ05Y+3IiB9DQogICAgICAgICAgICBpZih0aGlzLnNlYXJjaFRleHQubGVuZ3RoID09IDApIHJldHVybjsNCiAgICAgICAgICAgIGxldCBpc0hhcyA9IGZhbHNlOw0KICAgICAgICAgICAgZm9yKGxldCBpPTA7aTx0aGlzLnJlc3RhdXJhbnRzLmxlbmd0aDtpKyspew0KICAgICAgICAgICAgICAgIGxldCBpdGVtID0gdGhpcy5yZXN0YXVyYW50c1tpXTsNCiAgICAgICAgICAgICAgICBpZihpdGVtLnZhbHVlLmluZGV4T2YodGhpcy5zZWFyY2hUZXh0KT4tMSAmJiBpdGVtLnZhbHVlLmxlbmd0aCA9PSB0aGlzLnNlYXJjaFRleHQubGVuZ3RoKXsNCiAgICAgICAgICAgICAgICAgICAgaXNIYXMgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZihpc0hhcykgcmV0dXJuOw0KICAgICAgICAgICAgdGhpcy5yZXN0YXVyYW50cy51bnNoaWZ0KHt2YWx1ZTp0aGlzLnNlYXJjaFRleHQsYWRkcmVzczonJ30pOw0KICAgICAgICAgICAgdGhpcy5yZXN0YXVyYW50cyA9IHRoaXMucmVzdGF1cmFudHMuc2xpY2UoMCx0aGlzLm1heENhY2hlTnVtKTsNCiAgICAgICAgICAgIGxldCBzdHIgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnJlc3RhdXJhbnRzKTsNCiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnQ3VzdG9tU2VhcmNoQ2FjaGVzJyxzdHIpOw0KICAgICAgICB9LA0KICAgICAgICBoYW5kbGVTZWxlY3QoKXsNCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NlYXJjaC1jaGFuZ2UnLHRoaXMuc2VhcmNoVGV4dCk7DQogICAgICAgIH0sDQogICAgICAgIHF1ZXJ5U2VhcmNoKHF1ZXJ5U3RyaW5nLCBjYikgew0KICAgICAgICAgICAgY29uc3QgcmVzdGF1cmFudHMgPSB0aGlzLnJlc3RhdXJhbnRzOw0KICAgICAgICAgICAgbGV0IHJlc3VsdHMgPSBxdWVyeVN0cmluZyA/IHJlc3RhdXJhbnRzLmZpbHRlcih0aGlzLmNyZWF0ZUZpbHRlcihxdWVyeVN0cmluZykpIDogcmVzdGF1cmFudHM7DQogICAgICAgICAgICAvLyDosIPnlKggY2FsbGJhY2sg6L+U5Zue5bu66K6u5YiX6KGo55qE5pWw5o2uDQogICAgICAgICAgICBjYihyZXN1bHRzKTsNCiAgICAgICAgfSwNCiAgICAgICAgY3JlYXRlRmlsdGVyKHF1ZXJ5U3RyaW5nKSB7DQogICAgICAgICAgICByZXR1cm4gKHJlc3RhdXJhbnQpID0+IHsNCiAgICAgICAgICAgICAgICByZXR1cm4gKHJlc3RhdXJhbnQudmFsdWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHF1ZXJ5U3RyaW5nLnRvTG93ZXJDYXNlKCkpID09PSAwKTsNCiAgICAgICAgICAgIH07DQogICAgICAgIH0sDQogICAgfQ0KfQ0K"},{"version":3,"sources":["CustomSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CustomSearch.vue","sourceRoot":"node_modules/am-source-select/sourceSelect/components","sourcesContent":["<template>\r\n    <!-- <el-input \r\n        class=\"custom-search\"\r\n        v-model=\"searchText\" \r\n        placeholder=\"请输入关键字\"\r\n        clearable\r\n        size=\"small\" \r\n        @clear=\"queryChangeHandler\"\r\n        @keyup.enter.native=\"queryChangeHandler\">\r\n            <el-button class=\"custom-search-btn\" slot=\"append\" type=\"primary\" size=\"small\" @click=\"queryChangeHandler\">搜索</el-button>\r\n    </el-input> -->\r\n    <el-autocomplete\r\n      class=\"custom-search\"\r\n      v-model=\"searchText\"\r\n      :fetch-suggestions=\"querySearch\"\r\n      placeholder=\"请输入关键字\"\r\n      clearable\r\n      size=\"small\" \r\n      @keyup.enter.native=\"queryChangeHandler\"\r\n      @clear=\"queryChangeHandler\"\r\n      @select=\"handleSelect\"\r\n      @focus=\"focusHandler\"\r\n    >\r\n        <el-button class=\"custom-search-btn\" slot=\"append\" type=\"primary\" size=\"small\" @click=\"queryChangeHandler\">搜索</el-button>\r\n    </el-autocomplete>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:'custom-search',\r\n    data(){\r\n        return {\r\n            searchText:'',\r\n            restaurants:[],\r\n            maxCacheNum:50,\r\n        }\r\n    },\r\n    created(){\r\n        \r\n    },\r\n    mounted(){\r\n        \r\n    },\r\n    methods:{\r\n        queryChangeHandler(){\r\n            this.$emit('search-change',this.searchText);\r\n            this.blurHandler();\r\n        },\r\n        focusHandler(){\r\n            //取出\r\n            let str = window.localStorage.getItem('CustomSearchCaches');\r\n            if(str){\r\n                this.restaurants = JSON.parse(str);\r\n            }\r\n        },\r\n        blurHandler(){\r\n            //写入\r\n            // { \"value\": \"三全鲜食（北新泾店）\", \"address\": \"长宁区新渔路144号\" }\r\n            if(this.searchText.length == 0) return;\r\n            let isHas = false;\r\n            for(let i=0;i<this.restaurants.length;i++){\r\n                let item = this.restaurants[i];\r\n                if(item.value.indexOf(this.searchText)>-1 && item.value.length == this.searchText.length){\r\n                    isHas = true;\r\n                    break;\r\n                }\r\n            }\r\n            if(isHas) return;\r\n            this.restaurants.unshift({value:this.searchText,address:''});\r\n            this.restaurants = this.restaurants.slice(0,this.maxCacheNum);\r\n            let str = JSON.stringify(this.restaurants);\r\n            window.localStorage.setItem('CustomSearchCaches',str);\r\n        },\r\n        handleSelect(){\r\n            this.$emit('search-change',this.searchText);\r\n        },\r\n        querySearch(queryString, cb) {\r\n            const restaurants = this.restaurants;\r\n            let results = queryString ? restaurants.filter(this.createFilter(queryString)) : restaurants;\r\n            // 调用 callback 返回建议列表的数据\r\n            cb(results);\r\n        },\r\n        createFilter(queryString) {\r\n            return (restaurant) => {\r\n                return (restaurant.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\r\n            };\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.custom-search{\r\n    width: 100%;\r\n\r\n    .custom-search-btn {\r\n        color: #ffffff;\r\n        background-color: #409EFF;\r\n        border: none;\r\n        border-top-left-radius: 0;\r\n        border-bottom-left-radius: 0;\r\n\r\n        &:hover{\r\n            background-color: #66b1ff;\r\n        }\r\n    }\r\n}\r\n</style>"]}]}